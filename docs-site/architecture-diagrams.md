---
layout: doc
title: Architecture Diagrams
permalink: /architecture-diagrams/
---

# NeuraScale Architecture Diagrams

This page contains detailed architectural diagrams for the NeuraScale platform, illustrating data flows, component interactions, and system design patterns.

## Table of Contents

1. [System Architecture Overview](#system-architecture-overview)
2. [Device Data Flow](#device-data-flow)
3. [Real-Time Processing Pipeline](#real-time-processing-pipeline)
4. [Multi-Device Synchronization](#multi-device-synchronization)
5. [Security Architecture](#security-architecture)
6. [Deployment Architecture](#deployment-architecture)
7. [Database Architecture](#database-architecture)
8. [API Gateway Architecture](#api-gateway-architecture)

## System Architecture Overview

### High-Level Component Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              NeuraScale Platform                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────┐  ┌─────────────────┐  ┌─────────────────┐            │
│  │   Client Layer  │  │   Client Layer  │  │   Client Layer  │            │
│  │  ┌───────────┐  │  │  ┌───────────┐  │  │  ┌───────────┐  │            │
│  │  │ Research  │  │  │  │ Clinical  │  │  │  │ Consumer  │  │            │
│  │  │   Tools   │  │  │  │  Systems  │  │  │  │    Apps   │  │            │
│  │  └───────────┘  │  │  └───────────┘  │  │  └───────────┘  │            │
│  └────────┬────────┘  └────────┬────────┘  └────────┬────────┘            │
│           │                     │                     │                      │
│           └─────────────────────┴─────────────────────┘                      │
│                                 │                                            │
│  ┌──────────────────────────────┴──────────────────────────────┐           │
│  │                       API Gateway Layer                       │           │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐   │           │
│  │  │   Load   │  │   Auth   │  │   Rate   │  │  Cache   │   │           │
│  │  │ Balancer │→ │  Service │→ │  Limiter │→ │  Layer   │   │           │
│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘   │           │
│  └──────────────────────────────┬──────────────────────────────┘           │
│                                 │                                            │
│  ┌──────────────────────────────┴──────────────────────────────┐           │
│  │                      Core Services Layer                      │           │
│  │                                                               │           │
│  │  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐ │           │
│  │  │ Device Service │  │   Processing   │  │ Data Service   │ │           │
│  │  │                │  │    Service     │  │                │ │           │
│  │  │ • Discovery    │  │ • Filtering    │  │ • Time Series  │ │           │
│  │  │ • Connection   │  │ • Feature Ext  │  │ • Analytics    │ │           │
│  │  │ • Streaming    │  │ • ML Pipeline  │  │ • Export       │ │           │
│  │  │ • Health Mon   │  │ • Real-time    │  │ • Archive      │ │           │
│  │  └────────┬───────┘  └────────┬───────┘  └────────┬───────┘ │           │
│  │           │                    │                    │         │           │
│  └───────────┴────────────────────┴────────────────────┴────────┘           │
│                                 │                                            │
│  ┌──────────────────────────────┴──────────────────────────────┐           │
│  │                    Infrastructure Layer                       │           │
│  │                                                               │           │
│  │  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐      │           │
│  │  │ Message Bus  │  │   Storage    │  │  Monitoring  │      │           │
│  │  │              │  │              │  │              │      │           │
│  │  │ • Kafka      │  │ • TimeScale  │  │ • Prometheus │      │           │
│  │  │ • Redis      │  │ • Redis      │  │ • Grafana    │      │           │
│  │  │ • RabbitMQ   │  │ • S3/MinIO   │  │ • ELK Stack  │      │           │
│  │  └──────────────┘  └──────────────┘  └──────────────┘      │           │
│  └──────────────────────────────────────────────────────────────┘           │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Device Data Flow

### End-to-End Data Flow from Device to Application

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           Device Data Flow                                   │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────┐      ┌─────────────┐      ┌─────────────┐                │
│  │ BCI Device  │      │ BCI Device  │      │ BCI Device  │                │
│  │  (OpenBCI)  │      │  (Emotiv)   │      │   (Muse)    │                │
│  └──────┬──────┘      └──────┬──────┘      └──────┬──────┘                │
│         │                     │                     │                        │
│      Serial               USB/BLE              Bluetooth                     │
│         │                     │                     │                        │
│  ┌──────▼──────────────────────▼──────────────────────▼──────┐             │
│  │                    Device Drivers Layer                     │             │
│  │  ┌────────────┐  ┌────────────┐  ┌────────────┐          │             │
│  │  │  Serial    │  │    USB     │  │    BLE     │          │             │
│  │  │  Driver    │  │   Driver   │  │   Driver   │          │             │
│  │  └─────┬──────┘  └─────┬──────┘  └─────┬──────┘          │             │
│  └─────────┴───────────────┴───────────────┴─────────────────┘             │
│                             │                                                │
│  ┌──────────────────────────▼────────────────────────────────┐             │
│  │                  Device Manager Service                     │             │
│  │                                                             │             │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐       │             │
│  │  │ Connection  │  │   Device    │  │  Impedance  │       │             │
│  │  │   Manager   │  │  Registry   │  │   Checker   │       │             │
│  │  └─────┬───────┘  └──────┬──────┘  └──────┬──────┘       │             │
│  │        │                  │                 │               │             │
│  │  ┌─────▼──────────────────▼─────────────────▼─────┐       │             │
│  │  │          Unified Stream Buffer                  │       │             │
│  │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐       │       │             │
│  │  │  │ Ring    │  │ Sample  │  │  Time   │       │       │             │
│  │  │  │ Buffer  │→ │  Sync   │→ │  Align  │       │       │             │
│  │  │  └─────────┘  └─────────┘  └─────────┘       │       │             │
│  │  └─────────────────────────┬───────────────────────┘       │             │
│  └────────────────────────────┴───────────────────────────────┘             │
│                               │                                              │
│  ┌────────────────────────────▼───────────────────────────────┐             │
│  │                    Data Processing Pipeline                 │             │
│  │                                                             │             │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  │             │
│  │  │ Pre-     │  │ Feature  │  │ Artifact │  │    ML    │  │             │
│  │  │ Process  │→ │ Extract  │→ │ Removal  │→ │ Inference│  │             │
│  │  └──────────┘  └──────────┘  └──────────┘  └──────────┘  │             │
│  └─────────────────────────────┬──────────────────────────────┘             │
│                               │                                              │
│  ┌────────────────────────────▼───────────────────────────────┐             │
│  │                      Storage & API Layer                    │             │
│  │                                                             │             │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐  ┌──────────┐  │             │
│  │  │   Time   │  │  Redis   │  │    S3    │  │   API    │  │             │
│  │  │  Series  │  │  Cache   │  │ Archive  │  │ Gateway  │  │             │
│  │  └──────────┘  └──────────┘  └──────────┘  └─────┬────┘  │             │
│  └────────────────────────────────────────────────────┴───────┘             │
│                                                       │                      │
│                                              ┌────────▼────────┐             │
│                                              │  Applications   │             │
│                                              └─────────────────┘             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Real-Time Processing Pipeline

### Detailed Signal Processing Flow

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                      Real-Time Processing Pipeline                           │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  Input: Raw Neural Data Stream                                              │
│  ┌───────────────────────────────────────────────────────────┐             │
│  │ Ch1: [████████████████████████████████████████████████]  │             │
│  │ Ch2: [████████████████████████████████████████████████]  │             │
│  │ Ch3: [████████████████████████████████████████████████]  │             │
│  │ Ch4: [████████████████████████████████████████████████]  │             │
│  └─────────────────────────────┬─────────────────────────────┘             │
│                                │                                             │
│  Stage 1: Preprocessing        ▼                                            │
│  ┌─────────────────────────────────────────────────────────────┐           │
│  │  ┌───────────┐     ┌───────────┐     ┌───────────┐         │           │
│  │  │ Resampling│     │  Notch    │     │ Bandpass  │         │           │
│  │  │ 250→1000Hz│ --> │ 50/60 Hz  │ --> │  0.5-45Hz │         │           │
│  │  └───────────┘     └───────────┘     └───────────┘         │           │
│  └─────────────────────────────┬───────────────────────────────┘           │
│                                │                                             │
│  Stage 2: Artifact Removal     ▼                                            │
│  ┌─────────────────────────────────────────────────────────────┐           │
│  │  ┌───────────┐     ┌───────────┐     ┌───────────┐         │           │
│  │  │    EOG    │     │    EMG    │     │  Motion   │         │           │
│  │  │ Detection │ --> │ Detection │ --> │ Detection │         │           │
│  │  └───────────┘     └───────────┘     └───────────┘         │           │
│  │         │                 │                 │                │           │
│  │  ┌──────▼─────────────────▼─────────────────▼──────┐        │           │
│  │  │           Artifact Correction Algorithm          │        │           │
│  │  │    (ICA / Adaptive Filtering / Regression)      │        │           │
│  │  └──────────────────────┬──────────────────────────┘        │           │
│  └─────────────────────────┴───────────────────────────────────┘           │
│                                │                                             │
│  Stage 3: Feature Extraction   ▼                                            │
│  ┌─────────────────────────────────────────────────────────────┐           │
│  │                                                              │           │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │           │
│  │  │  Spectral   │  │  Temporal   │  │Connectivity │        │           │
│  │  │  Features   │  │  Features   │  │  Features   │        │           │
│  │  │             │  │             │  │             │        │           │
│  │  │ • FFT       │  │ • Mean      │  │ • Coherence │        │           │
│  │  │ • PSD       │  │ • Variance  │  │ • PLV       │        │           │
│  │  │ • Wavelets  │  │ • Skewness  │  │ • PAC       │        │           │
│  │  │ • Band Power│  │ • Kurtosis  │  │ • Granger   │        │           │
│  │  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘        │           │
│  │         └─────────────────┴─────────────────┘               │           │
│  │                           │                                  │           │
│  │                    ┌──────▼──────┐                          │           │
│  │                    │Feature Vector│                          │           │
│  │                    │  [n × 256]  │                          │           │
│  │                    └──────┬──────┘                          │           │
│  └───────────────────────────┴─────────────────────────────────┘           │
│                              │                                               │
│  Stage 4: ML Classification  ▼                                              │
│  ┌─────────────────────────────────────────────────────────────┐           │
│  │  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐    │           │
│  │  │   Feature   │    │   Neural    │    │   Output    │    │           │
│  │  │Normalization│ -> │   Network   │ -> │  Decoding   │    │           │
│  │  │ (Z-score)   │    │ (CNN/LSTM)  │    │ (Softmax)   │    │           │
│  │  └─────────────┘    └─────────────┘    └──────┬──────┘    │           │
│  └────────────────────────────────────────────────┴────────────┘           │
│                                                   │                          │
│  Output: Classified Neural Intent                ▼                          │
│  ┌───────────────────────────────────────────────────────────┐             │
│  │ Class: "Move Left" | Confidence: 0.92 | Latency: 47ms    │             │
│  └───────────────────────────────────────────────────────────┘             │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Multi-Device Synchronization

### Time Synchronization Architecture

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    Multi-Device Synchronization System                       │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────┐           │
│  │                     Global Time Reference                     │           │
│  │                    (NTP Server / GPS Clock)                   │           │
│  └───────────────────────────┬─────────────────────────────────┘           │
│                              │                                               │
│         ┌────────────────────┼────────────────────┐                        │
│         │                    │                    │                          │
│  ┌──────▼──────┐     ┌──────▼──────┐     ┌──────▼──────┐                  │
│  │  Device 1   │     │  Device 2   │     │  Device 3   │                  │
│  │ SR: 250 Hz  │     │ SR: 1000 Hz │     │ SR: 500 Hz  │                  │
│  └──────┬──────┘     └──────┬──────┘     └──────┬──────┘                  │
│         │                    │                    │                          │
│  ┌──────▼──────────────────────────────────────────▼──────┐                │
│  │               Device Time Synchronization               │                │
│  │                                                         │                │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐   │                │
│  │  │   Clock     │  │   Drift     │  │   Offset    │   │                │
│  │  │   Sync      │  │ Correction  │  │ Calibration │   │                │
│  │  └──────┬──────┘  └──────┬──────┘  └──────┬──────┘   │                │
│  │         └─────────────────┴─────────────────┘          │                │
│  └─────────────────────────────┬──────────────────────────┘                │
│                                │                                             │
│  ┌─────────────────────────────▼──────────────────────────┐                │
│  │              Unified Time-Aligned Buffer                │                │
│  │                                                         │                │
│  │  Device 1: [▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪]   │                │
│  │  Device 2: [▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪]   │                │
│  │  Device 3: [▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪▪]   │                │
│  │             └────────────────┬────────────────┘         │                │
│  │                              │                          │                │
│  │  ┌───────────────────────────▼────────────────────┐    │                │
│  │  │         Dynamic Resampling Engine              │    │                │
│  │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐       │    │                │
│  │  │  │ Upsample│  │ Aligned │  │Downsample│      │    │                │
│  │  │  │ (Interp)│→ │  Grid   │→ │(Decimate)│      │    │                │
│  │  │  └─────────┘  └─────────┘  └─────────┘       │    │                │
│  │  └────────────────────────┬──────────────────────┘    │                │
│  └───────────────────────────┴────────────────────────────┘                │
│                              │                                               │
│                              ▼                                               │
│  ┌─────────────────────────────────────────────────────────┐               │
│  │           Synchronized Multi-Channel Output              │               │
│  │     Time-aligned data @ unified sampling rate           │               │
│  └─────────────────────────────────────────────────────────┘               │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Security Architecture

### Multi-Layer Security Model

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                          Security Architecture                               │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────┐           │
│  │                    Layer 7: Application Security              │           │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │           │
│  │  │    Input    │  │   Output    │  │   Session   │         │           │
│  │  │ Validation  │  │  Encoding   │  │ Management  │         │           │
│  │  └─────────────┘  └─────────────┘  └─────────────┘         │           │
│  └───────────────────────────┬─────────────────────────────────┘           │
│                              │                                               │
│  ┌───────────────────────────▼─────────────────────────────────┐           │
│  │                    Layer 6: API Security                      │           │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │           │
│  │  │OAuth 2.0/JWT│  │    Rate     │  │    CORS     │         │           │
│  │  │    Auth     │  │  Limiting   │  │   Policy    │         │           │
│  │  └─────────────┘  └─────────────┘  └─────────────┘         │           │
│  └───────────────────────────┬─────────────────────────────────┘           │
│                              │                                               │
│  ┌───────────────────────────▼─────────────────────────────────┐           │
│  │                 Layer 5: Transport Security                   │           │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │           │
│  │  │   TLS 1.3   │  │Certificate  │  │   HSTS      │         │           │
│  │  │ Encryption  │  │  Pinning    │  │  Headers    │         │           │
│  │  └─────────────┘  └─────────────┘  └─────────────┘         │           │
│  └───────────────────────────┬─────────────────────────────────┘           │
│                              │                                               │
│  ┌───────────────────────────▼─────────────────────────────────┐           │
│  │                  Layer 4: Network Security                    │           │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │           │
│  │  │    VPC      │  │  Security   │  │   Network   │         │           │
│  │  │ Isolation   │  │   Groups    │  │    ACLs     │         │           │
│  │  └─────────────┘  └─────────────┘  └─────────────┘         │           │
│  └───────────────────────────┬─────────────────────────────────┘           │
│                              │                                               │
│  ┌───────────────────────────▼─────────────────────────────────┐           │
│  │                 Layer 3: Service Security                     │           │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │           │
│  │  │   Service   │  │   Mutual    │  │   Service   │         │           │
│  │  │   Mesh      │  │    TLS      │  │  Accounts   │         │           │
│  │  └─────────────┘  └─────────────┘  └─────────────┘         │           │
│  └───────────────────────────┬─────────────────────────────────┘           │
│                              │                                               │
│  ┌───────────────────────────▼─────────────────────────────────┐           │
│  │                   Layer 2: Data Security                      │           │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │           │
│  │  │ Encryption  │  │    Key      │  │    Data     │         │           │
│  │  │  at Rest    │  │ Management  │  │  Masking    │         │           │
│  │  └─────────────┘  └─────────────┘  └─────────────┘         │           │
│  └───────────────────────────┬─────────────────────────────────┘           │
│                              │                                               │
│  ┌───────────────────────────▼─────────────────────────────────┐           │
│  │                Layer 1: Audit & Compliance                    │           │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │           │
│  │  │   Audit     │  │ Compliance  │  │  Incident   │         │           │
│  │  │  Logging    │  │ Monitoring  │  │  Response   │         │           │
│  │  └─────────────┘  └─────────────┘  └─────────────┘         │           │
│  └─────────────────────────────────────────────────────────────┘           │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Deployment Architecture

### Multi-Region High Availability Setup

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                     Global Deployment Architecture                           │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────┐           │
│  │                        Global DNS                             │           │
│  │                    (Route 53 / CloudFlare)                    │           │
│  └───────────────────────┬─────────────────────────────────────┘           │
│                          │                                                   │
│         ┌────────────────┼────────────────────┐                            │
│         │                │                    │                              │
│  ┌──────▼──────┐  ┌──────▼──────┐  ┌────────▼────────┐                    │
│  │  US-EAST-1  │  │  EU-WEST-1  │  │  AP-SOUTHEAST-1 │                    │
│  │   Primary   │  │  Secondary  │  │    Tertiary     │                    │
│  └──────┬──────┘  └──────┬──────┘  └────────┬────────┘                    │
│         │                │                    │                              │
│  ┌──────▼────────────────▼────────────────────▼──────┐                     │
│  │              CloudFront Distribution               │                     │
│  │           (Global Edge Network - 400+ POPs)        │                     │
│  └────────────────────────┬──────────────────────────┘                     │
│                           │                                                  │
│  ┌────────────────────────▼──────────────────────────┐                     │
│  │      Regional Application Load Balancers           │                     │
│  │  ┌─────────┐    ┌─────────┐    ┌─────────┐      │                     │
│  │  │ US-EAST │    │EU-WEST  │    │AP-SOUTH │      │                     │
│  │  │   ALB   │    │  ALB    │    │  ALB    │      │                     │
│  │  └────┬────┘    └────┬────┘    └────┬────┘      │                     │
│  └───────┴───────────────┴───────────────┴───────────┘                     │
│          │                │                │                                 │
│  ┌───────▼───────────────▼───────────────▼───────┐                        │
│  │         Auto Scaling Groups (per region)       │                        │
│  │                                                │                        │
│  │  ┌─────────────────────────────────────────┐  │                        │
│  │  │          ECS/EKS Clusters               │  │                        │
│  │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐ │  │                        │
│  │  │  │Service A│  │Service B│  │Service C│ │  │                        │
│  │  │  │ (×3-10) │  │ (×3-10) │  │ (×3-10) │ │  │                        │
│  │  │  └─────────┘  └─────────┘  └─────────┘ │  │                        │
│  │  └─────────────────────────────────────────┘  │                        │
│  └─────────────────────────┬─────────────────────┘                        │
│                           │                                                 │
│  ┌────────────────────────▼──────────────────────┐                        │
│  │        Multi-AZ Database Deployment           │                        │
│  │                                                │                        │
│  │  ┌──────────────┐    ┌──────────────┐        │                        │
│  │  │   Primary    │    │   Standby    │        │                        │
│  │  │  RDS/Aurora  ├────┤  RDS/Aurora  │        │                        │
│  │  │    (AZ-1)    │sync│    (AZ-2)    │        │                        │
│  │  └──────┬───────┘    └──────────────┘        │                        │
│  │         │                                      │                        │
│  │  ┌──────▼────────────────────────────┐       │                        │
│  │  │    Read Replicas (Cross-Region)    │       │                        │
│  │  └────────────────────────────────────┘       │                        │
│  └────────────────────────────────────────────────┘                        │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────┐           │
│  │                    Disaster Recovery                          │           │
│  │  • RTO: <1 hour  • RPO: <5 minutes                          │           │
│  │  • Automated failover with health checks                     │           │
│  │  • Cross-region replication for all critical data           │           │
│  └─────────────────────────────────────────────────────────────┘           │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Database Architecture

### Time-Series Data Storage Strategy

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        Database Architecture                                 │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────┐           │
│  │                    Data Ingestion Layer                       │           │
│  │                 (10,000+ channels @ 1kHz)                    │           │
│  └───────────────────────────┬─────────────────────────────────┘           │
│                              │                                               │
│  ┌───────────────────────────▼─────────────────────────────────┐           │
│  │                    Hot Storage Tier                           │           │
│  │                    (Latest 5 minutes)                         │           │
│  │                                                               │           │
│  │  ┌─────────────────┐    ┌─────────────────┐                 │           │
│  │  │   Redis Cluster │    │  In-Memory DB   │                 │           │
│  │  │                 │    │                 │                 │           │
│  │  │ • Ring Buffers  │    │ • Real-time    │                 │           │
│  │  │ • Pub/Sub       │    │ • Sub-ms query │                 │           │
│  │  │ • 128GB RAM     │    │ • Streaming    │                 │           │
│  │  └────────┬────────┘    └────────┬────────┘                 │           │
│  └───────────┴───────────────────────┴─────────────────────────┘           │
│                              │                                               │
│  ┌───────────────────────────▼─────────────────────────────────┐           │
│  │                    Warm Storage Tier                          │           │
│  │                    (Last 24 hours)                            │           │
│  │                                                               │           │
│  │  ┌──────────────────────────────────────────┐                │           │
│  │  │            TimescaleDB Cluster            │                │           │
│  │  │                                           │                │           │
│  │  │  ┌─────────┐  ┌─────────┐  ┌─────────┐  │                │           │
│  │  │  │ Hyper-  │  │Continuous│  │ Chunk   │  │                │           │
│  │  │  │ tables  │  │Aggregate │  │Compress │  │                │           │
│  │  │  └─────────┘  └─────────┘  └─────────┘  │                │           │
│  │  │                                           │                │           │
│  │  │  • 2TB NVMe SSD                          │                │           │
│  │  │  • 10:1 compression                      │                │           │
│  │  │  • <100ms queries                        │                │           │
│  │  └───────────────────┬──────────────────────┘                │           │
│  └──────────────────────┴──────────────────────────────────────┘           │
│                         │                                                    │
│  ┌──────────────────────▼──────────────────────────────────────┐           │
│  │                   Cold Storage Tier                          │           │
│  │                   (30+ days archive)                         │           │
│  │                                                              │           │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐        │           │
│  │  │  S3/MinIO   │  │   Parquet   │  │   Iceberg   │        │           │
│  │  │  Storage    │  │   Format    │  │   Tables    │        │           │
│  │  │             │  │             │  │             │        │           │
│  │  │ • Unlimited │  │ • Columnar  │  │ • ACID      │        │           │
│  │  │ • $0.023/GB │  │ • 20:1 comp │  │ • Time travel│       │           │
│  │  │ • 11 9's    │  │ • Analytics │  │ • Schema evo│       │           │
│  │  └─────────────┘  └─────────────┘  └─────────────┘        │           │
│  └──────────────────────────────────────────────────────────────┘           │
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────┐           │
│  │                    Query Router                               │           │
│  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐         │           │
│  │  │Time Range   │  │   Query     │  │   Cache     │         │           │
│  │  │  Router     │→ │ Optimizer   │→ │  Manager    │         │           │
│  │  └─────────────┘  └─────────────┘  └─────────────┘         │           │
│  └─────────────────────────────────────────────────────────────┘           │
└─────────────────────────────────────────────────────────────────────────────┘
```

## API Gateway Architecture

### Request Flow and Processing

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                         API Gateway Architecture                             │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  ┌─────────────────────────────────────────────────────────────┐           │
│  │                     Client Requests                           │           │
│  │  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐           │           │
│  │  │  REST  │  │WebSocket│  │ GraphQL│  │  gRPC  │           │           │
│  │  └───┬────┘  └───┬────┘  └───┬────┘  └───┬────┘           │           │
│  └──────┴───────────┴───────────┴───────────┴─────────────────┘           │
│         │           │           │           │                                │
│  ┌──────▼───────────▼───────────▼───────────▼──────┐                       │
│  │              Layer 1: Edge Protection            │                       │
│  │  ┌─────────┐  ┌─────────┐  ┌─────────┐        │                       │
│  │  │   WAF   │  │  DDoS   │  │   Bot   │        │                       │
│  │  │  Rules  │  │ Shield  │  │Detection│        │                       │
│  │  └────┬────┘  └────┬────┘  └────┬────┘        │                       │
│  └───────┴─────────────┴─────────────┴─────────────┘                       │
│          │                                                                   │
│  ┌───────▼─────────────────────────────────────────┐                       │
│  │         Layer 2: Load Balancing & Routing       │                       │
│  │  ┌─────────────┐  ┌─────────────┐              │                       │
│  │  │   Health    │  │   Traffic   │              │                       │
│  │  │   Checks    │  │Distribution │              │                       │
│  │  └──────┬──────┘  └──────┬──────┘              │                       │
│  │         │                 │                      │                       │
│  │  ┌──────▼─────────────────▼──────┐              │                       │
│  │  │    Intelligent Routing        │              │                       │
│  │  │ • Path-based  • Header-based  │              │                       │
│  │  │ • Geographic  • A/B Testing   │              │                       │
│  │  └────────────────┬──────────────┘              │                       │
│  └───────────────────┴─────────────────────────────┘                       │
│                      │                                                       │
│  ┌───────────────────▼─────────────────────────────┐                       │
│  │          Layer 3: Authentication & Auth         │                       │
│  │                                                 │                       │
│  │  ┌─────────────┐  ┌─────────────┐             │                       │
│  │  │JWT/OAuth2.0 │  │    API      │             │                       │
│  │  │Validation   │→ │    Keys     │             │                       │
│  │  └─────────────┘  └──────┬──────┘             │                       │
│  │                          │                      │                       │
│  │  ┌───────────────────────▼────────────┐        │                       │
│  │  │      Permission Evaluation         │        │                       │
│  │  │  • Role-based (RBAC)              │        │                       │
│  │  │  • Attribute-based (ABAC)         │        │                       │
│  │  │  • Policy engine                  │        │                       │
│  │  └────────────────┬──────────────────┘        │                       │
│  └───────────────────┴─────────────────────────────┘                       │
│                      │                                                       │
│  ┌───────────────────▼─────────────────────────────┐                       │
│  │           Layer 4: Rate Limiting                │                       │
│  │                                                 │                       │
│  │  ┌─────────────────────────────────────┐       │                       │
│  │  │        Token Bucket Algorithm        │       │                       │
│  │  │  ┌─────────┐  ┌─────────┐          │       │                       │
│  │  │  │ Global  │  │Per-User │          │       │                       │
│  │  │  │ Limits  │  │ Limits  │          │       │                       │
│  │  │  └─────────┘  └─────────┘          │       │                       │
│  │  │                                      │       │                       │
│  │  │  Rate Limits:                       │       │                       │
│  │  │  • 1000 req/min (REST)             │       │                       │
│  │  │  • 10 connections (WebSocket)       │       │                       │
│  │  │  • Custom limits per tier           │       │                       │
│  │  └──────────────────┬──────────────────┘       │                       │
│  └─────────────────────┴───────────────────────────┘                       │
│                        │                                                     │
│  ┌─────────────────────▼───────────────────────────┐                       │
│  │            Layer 5: Request Processing          │                       │
│  │                                                 │                       │
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐    │                       │
│  │  │ Request  │  │ Response │  │  Cache   │    │                       │
│  │  │Transform │→ │ Transform│→ │  Layer   │    │                       │
│  │  └──────────┘  └──────────┘  └──────────┘    │                       │
│  │                                                 │                       │
│  │  ┌──────────────────────────────────────┐      │                       │
│  │  │         Service Discovery            │      │                       │
│  │  │  • Consul  • Eureka  • K8s native   │      │                       │
│  │  └─────────────────┬────────────────────┘      │                       │
│  └────────────────────┴────────────────────────────┘                       │
│                       │                                                      │
│                       ▼                                                      │
│  ┌─────────────────────────────────────────────────┐                       │
│  │              Backend Services                    │                       │
│  └─────────────────────────────────────────────────┘                       │
└─────────────────────────────────────────────────────────────────────────────┘
```

## Performance Monitoring Dashboard

### Real-Time Metrics Visualization

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                    NeuraScale Performance Dashboard                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│  System Health Overview                          Last Updated: 10:30:45 AM   │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐  ┌─────────────┐      │
│  │   HEALTHY   │  │  DEVICES    │  │  LATENCY    │  │   UPTIME    │      │
│  │     ✓      │  │    127      │  │   47ms      │  │  99.99%     │      │
│  └─────────────┘  └─────────────┘  └─────────────┘  └─────────────┘      │
│                                                                              │
│  Real-Time Metrics                                                          │
│  ┌─────────────────────────────────────────────────────────────┐           │
│  │ Latency Distribution (ms)                                    │           │
│  │ 100 ┤                                                        │           │
│  │  80 ┤      ╭─╮                                              │           │
│  │  60 ┤    ╭─╯ ╰─╮        ╭─╮                                │           │
│  │  40 ┤  ╭─╯     ╰─╮    ╭─╯ ╰─╮    ╭─────────────          │           │
│  │  20 ┤╭─╯         ╰────╯     ╰────╯                       │           │
│  │   0 └─────────────────────────────────────────────────    │           │
│  │     0    6   12   18   24   30   36   42   48   54   60   │           │
│  └─────────────────────────────────────────────────────────────┘           │
│                                                                              │
│  ┌──────────────────────┐  ┌──────────────────────┐                        │
│  │ Channel Throughput   │  │ CPU Utilization      │                        │
│  │ ████████████ 8,432   │  │ ██████░░░░░░ 45%     │                        │
│  │ Target: 10,000 ch/s  │  │ 8 cores active       │                        │
│  └──────────────────────┘  └──────────────────────┘                        │
│                                                                              │
│  Device Status Grid                                                         │
│  ┌───┬─────────────┬──────┬──────────┬───────────┬──────────┐            │
│  │ # │ Device      │ Type │ Channels │ Quality   │ Status   │            │
│  ├───┼─────────────┼──────┼──────────┼───────────┼──────────┤            │
│  │ 1 │ OpenBCI_01  │ EEG  │ 8        │ ████ 95%  │ ● Active │            │
│  │ 2 │ Emotiv_02   │ EEG  │ 14       │ ███░ 78%  │ ● Active │            │
│  │ 3 │ Muse_03     │ EEG  │ 4        │ ████ 92%  │ ● Active │            │
│  │ 4 │ gUSBamp_04  │ EEG  │ 64       │ ████ 98%  │ ● Active │            │
│  └───┴─────────────┴──────┴──────────┴───────────┴──────────┘            │
│                                                                              │
│  Active Alerts                                                              │
│  ┌──────────────────────────────────────────────────────────┐             │
│  │ ⚠ High impedance on Device OpenBCI_01 Channel 3          │             │
│  │ ℹ Scheduled maintenance in 2 hours                        │             │
│  └──────────────────────────────────────────────────────────┘             │
└─────────────────────────────────────────────────────────────────────────────┘
```

---

For interactive versions of these diagrams and additional architectural details, please refer to the [main architecture documentation](/architecture/) or contact the development team.
